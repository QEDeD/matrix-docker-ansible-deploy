# SPDX-FileCopyrightText: 2025 MDAD project contributors
# SPDX-License-Identifier: AGPL-3.0-or-later

---
# Default configuration for Docker service version history tracking

# Primary configuration (set these in inventory/host_vars to override defaults)
docker_summary_scope: "matrix-*"            # Glob pattern(s) selecting containers to include
docker_summary_history_max_entries: 100     # Maximum number of history entries to keep (0 = unlimited)
docker_summary_retention_days: 365          # Number of days to retain history entries (0 = unlimited)
docker_summary_display: true                # Enable/disable version summary display
docker_summary_enabled: true                # Master switch for the role
docker_summary_write_facts: true            # Allow skipping fact writes in tests/diagnostics
docker_summary_enable_discovery: true       # Require live Docker discovery (set false for offline tests)
docker_summary_container_overrides: []      # Optional list of containers ({name, image}) to bypass docker discovery
docker_summary_ansible_local_override: null  # Optional override for ansible_local facts (testing)

# Fact file locations
docker_summary_versions_fact_file: "matrix_versions.fact"
docker_summary_history_fact_file: "matrix_version_history.fact"
docker_summary_facts_dir: "/etc/ansible/facts.d"
docker_summary_write_facts_become: true

# Table display settings
docker_summary_table_style_unicode: false   # Set to false for ASCII-only tables (recommended for consistent display)
docker_summary_table_service_width: 30
docker_summary_table_version_width: 25
docker_summary_table_status_width: 18
docker_summary_table_auto_width: false      # When true, column widths adapt to data (bounded by min/max settings)
docker_summary_table_service_width_min: 18
docker_summary_table_service_width_max: 60
docker_summary_table_version_width_min: 18
docker_summary_table_version_width_max: 50
docker_summary_table_status_width_min: 12
docker_summary_table_status_width_max: 30
docker_summary_table_show_notes: false      # When true, render an additional NOTES column summarising metadata/state
docker_summary_table_notes_width: 24
docker_summary_table_notes_width_min: 16
docker_summary_table_notes_width_max: 48
docker_summary_table_notes_include_state: true  # Append container state (running/exited, restart counts) to notes
docker_summary_quiet_tasks: true

# Version extraction settings
docker_summary_version_extract_smart: true  # Extract clean version tags (e.g., "synapse:v1.96.1" from full image name)
docker_summary_mock_mode: false
docker_summary_show_history: false
